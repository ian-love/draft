########################################################################################################################
#
# 11mar 2019
# script to list beacon mac, associated map and beacon name
# "C:\DATA\OneDrive - Hewlett Packard Enterprise\meridian\scripts\working\beacon_list.py"

	# // start //
	# EC24B830BE75 beacon is on 5639445604728832 with a name of Test
	# 546C0E2A1359 beacon is on 5639445604728832 with a name of None
	# 546C0E2A1351 beacon is on 5639445604728832 with a name of Permanent
	# 546C0E2A1267 beacon is on 5639445604728832 with a name of Permanent
	# 546C0E2A105D beacon is on 5639445604728832 with a name of Permanent
	# 546C0E2A1306 beacon is on 5639445604728832 with a name of Permanent
	# 546C0E159123 beacon is on 5639445604728832 with a name of Permanent
	# 546C0E1599B1 beacon is on 5639445604728832 with a name of Permanent
	# 546C0E159118 beacon is on 5639445604728832 with a name of Permanent
	# 546C0E170506 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A120E beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A1074 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A14FB beacon is on 5715999101812736 with a name of None
	# 546C0E2A14E3 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E159162 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E170373 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A133E beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A1365 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A1374 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A1249 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A14BC beacon is on 5715999101812736 with a name of None
	# 546C0E1707A6 beacon is on 5715999101812736 with a name of None
	# 546C0E15910A beacon is on 5715999101812736 with a name of Permanent
	# 546C0E170790 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A120F beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A1239 beacon is on 5715999101812736 with a name of None
	# 546C0E2A104E beacon is on 5715999101812736 with a name of Permanent
	# 546C0E157B41 beacon is on 5715999101812736 with a name of None
	# 546C0E2A14D2 beacon is on 5715999101812736 with a name of None
	# 546C0E2A148A beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A14FC beacon is on 5715999101812736 with a name of None
	# 546C0E2A1070 beacon is on 5715999101812736 with a name of None
	# 546C0E2A1240 beacon is on 5715999101812736 with a name of None
	# 546C0E15740A beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A103F beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A160A beacon is on 5715999101812736 with a name of _Permanent
	# 546C0E1707CA beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A14A2 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A125F beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A1320 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A1028 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A14C7 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E156BF5 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A126C beacon is on 5715999101812736 with a name of Permanent
	# 546C0E157424 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A103A beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A1046 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A1215 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A1231 beacon is on 5715999101812736 with a name of Permanent
	# 546C0E2A107D beacon is on 5715999101812736 with a name of Permanent
	# 546C0E15B3B9 beacon is on 5639445604728832 with a name of Permanent
	# 546C0E2AF282 beacon is on 5639445604728832 with a name of Permanent
	# 546C0E2AF46F beacon is on 5639445604728832 with a name of Permanent
	# 546C0E2AF9BA beacon is on 5639445604728832 with a name of Permanent
	# 546C0E158A71 beacon is on 5639445604728832 with a name of Permanent
	# 546C0E2A105B beacon is on 5639445604728832 with a name of Permanent
	# 546C0E2AF9DB beacon is on 5639445604728832 with a name of Permanent
	# 546C0E2AF464 beacon is on 5639445604728832 with a name of Permanent
	# 546C0E15F666 beacon is on 5639445604728832 with a name of Permanent
	# 546C0E159982 beacon is on 5639445604728832 with a name of None
	# 546C0E170785 beacon is on 5639445604728832 with a name of None
	# 546C0E2AF421 beacon is on 5639445604728832 with a name of None
	# 546C0E15998D beacon is on 5639445604728832 with a name of None
	# 546C0E2A1076 beacon is on 5639445604728832 with a name of None
	# 546C0E2AF1ED beacon is on 5639445604728832 with a name of None
	# 546C0E2AF47F beacon is on 5639445604728832 with a name of None
	# 546C0E2AF1EA beacon is on 5639445604728832 with a name of None
	# 546C0E2AF1C8 beacon is on 5639445604728832 with a name of None
	# 546C0E2AF3E7 beacon is on 5639445604728832 with a name of None
	# 546C0E1599BC beacon is on 5639445604728832 with a name of None
	# 546C0E15BACD beacon is on 5639445604728832 with a name of None
	# 546C0E1599EE beacon is on 5639445604728832 with a name of None
	# 546C0E2A1210 beacon is on 5639445604728832 with a name of None
	# 546C0E159138 beacon is on 5639445604728832 with a name of None
	# 546C0E15B3F5 beacon is on 5639445604728832 with a name of None
	# 546C0E2AF9E7 beacon is on 5715999101812736 with a name of None
	# 546C0E2AFB14 beacon is on 5715999101812736 with a name of None
	# 546C0E2AF2F6 beacon is on 5715999101812736 with a name of None
	# 546C0E17079F beacon is on 5715999101812736 with a name of None
	# 546C0E2AF42F beacon is on 5715999101812736 with a name of None
	# 546C0E2A1480 beacon is on 5715999101812736 with a name of None
	# 546C0E2A14C0 beacon is on 5715999101812736 with a name of None
	# 546C0E1707C2 beacon is on 5715999101812736 with a name of None
	# 546C0E2AF9B0 beacon is on 5715999101812736 with a name of None
	# 546C0E2A14D1 beacon is on 5715999101812736 with a name of None
	# 546C0E2AF47B beacon is on 5715999101812736 with a name of None
	# 546C0E2AF994 beacon is on 5715999101812736 with a name of None
	# 546C0E2AF456 beacon is on 5715999101812736 with a name of None
	# 546C0E2AF3C8 beacon is on 5715999101812736 with a name of None
	# 546C0E2AF2BD beacon is on 5715999101812736 with a name of None
	# 546C0E2AF2EA beacon is on 5715999101812736 with a name of None
	# 546C0E2AF2AE beacon is on 5715999101812736 with a name of None
	# 546C0E2AF408 beacon is on 5715999101812736 with a name of None
	# 546C0E2AF460 beacon is on 5715999101812736 with a name of None
	# 546C0E2AF9E0 beacon is on 5715999101812736 with a name of None
	# 546C0E2A1048 beacon is on 5715999101812736 with a name of None
	# 546C0E2AF1D8 beacon is on 5715999101812736 with a name of None
	# 546C0E170915 beacon is on 5715999101812736 with a name of None
	# 546C0E2AF1BA beacon is on 5715999101812736 with a name of None
	# 546C0E2AF9A5 beacon is on 5715999101812736 with a name of None
	# // end //
########################################################################################################################
# Load the meridianAPI.py module
import requests
from demo_API import *

# Meridian location ID dictionary of all locations I'm authorized in
meridianLocation = {
"TSS_hague":"6695066221936640",
"my_site":"5158295536926720",
"cspo":"5794256550100992",
"reimagine":"5204712926740480",
"atm":"5819981480067072",
"Terna" : "5673887759335424",
"TSS_2019":"6314911219056640",
"lyngsoe":"5200230666731520",
"jbs" : "4518368792543232"}

# list of endpoints
endpoints = {
"beacons":"/beacons?page_size=500",
"placemarks":"/placemarks",
"token":"/tokens",
"login":"/login",
"logout":"/logout",
"locations":"/locations",
"maps":"/maps",
"organizations":"/organizations"}

# URLs will be needed to communicate with Meridian's API on the regular server
apiURI = "https://edit.meridianapps.com/api/locations/"
loginURI = "https://edit.meridianapps.com/api/login"

# URLs will be needed to communicate with Meridian's API on the EU server
eu_apiURI = "https://edit.meridianapps.com/api/locations/"
eu_loginURI = "https://edit.meridianapps.com/api/login"

# which site ??
testloc = meridianLocation["jbs"]
tokid = MeridianAPI.reqtoken(loginURI)


beaconEndpoint = endpoints["beacons"]
beaconURI = MeridianAPI(apiURI, testloc, beaconEndpoint)
print (beaconURI)

beacons = requests.get(beaconURI)
locbeacons = beacons.json()['results']

for i in range(len(locbeacons)):
		 print(locbeacons[i]['mac'],'beacon is on',locbeacons[i]['map'],'with a name of',locbeacons[i]['name'])